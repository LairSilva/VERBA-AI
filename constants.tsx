import { Scenario, DailyChallenge, SupportedLanguage, Translation } from './types';
import { ROLEPLAY_JOURNEY } from './data/roleplayJourney';
import { 
  Plane, Coffee, Briefcase, GraduationCap, PartyPopper, ShoppingBag, Languages, Utensils, MapPin, 
  BedDouble, Car, Activity, Gamepad2, Heart, Dumbbell, AlertTriangle, Film, Phone, Home, DollarSign, 
  Kanban, Presentation, Users, Laptop, ShieldAlert, UserCheck, Scale, Smile, Siren, Shield, Brain, Wine,
  CarFront, Receipt, Scissors, CloudSun, Stethoscope, Landmark, FileText, FileKey, Cone
} from 'lucide-react';
import React from 'react';

export const UI_TEXT: Record<SupportedLanguage, Translation> = {
  'pt-BR': {
    welcome: 'Bem-vindo',
    hero_title_1: 'Flu√™ncia √© uma',
    hero_title_2: 'Conversa.',
    hero_desc: 'Mergulhe em simula√ß√µes em tempo real. O Verba ouve sua pron√∫ncia, corrige erros de verbaliza√ß√£o e guia voc√™ para a flu√™ncia perfeita com IA.',
    start_btn: 'Come√ßar a Praticar',
    level: 'N√≠vel',
    streak: 'Ofensiva',
    xp: 'XP Total',
    streak_msg: 'Voc√™ est√° pegando fogo! üî•',
    xp_msg: 'Top 5% dos alunos',
    daily_quests: 'Miss√µes Di√°rias',
    practice_scenarios: 'Jornada de Flu√™ncia',
    choose_scenario: 'Escolha seu Cen√°rio',
    all: 'Todos',
    beginner: 'Iniciante',
    intermediate: 'Intermedi√°rio',
    advanced: 'Avan√ßado',
    live_btn: 'Voz',
    chat_btn: 'Chat',
    footer: 'Verba AI. Flu√™ncia atrav√©s da tecnologia.',
    api_missing: 'Chave API Ausente',
    api_missing_desc: 'Este aplicativo requer uma chave API do Google Gemini para funcionar.',
    toast_level: 'Subiu de N√≠vel!',
    toast_quest: 'Miss√£o Completa',
    input_placeholder: 'Digite sua mensagem...',
    ai_disclaimer: 'A IA pode cometer erros. Verifique informa√ß√µes importantes.',
    suggested_responses: 'Dicas do que falar',
    feedback_title: 'Feedback do Verba',
    listening: 'OUVINDO...',
    speaking: 'VERBA FALANDO...',
    ready: 'PRONTO',
    connecting: 'Conectando ao Coach...',
    error_conn: 'Erro de conex√£o.',
    retry: 'Tentar Novamente',
    interface_lang: 'Idioma do App',
    learning_lang: 'Quero aprender',
    next_phrase: 'Pr√≥xima Frase',
    prev_phrase: 'Anterior',
    script_mode: 'Roteiro de Fala',
    hint_button: 'Dica',
    locked: 'Bloqueado',
    complete_prev: 'Complete a anterior',
    finish_lesson: 'Concluir Li√ß√£o',
    lesson_complete: 'Li√ß√£o Completa!',
    continue: 'Continuar'
  },
  'en-US': {
    welcome: 'Welcome',
    hero_title_1: 'Fluency is a',
    hero_title_2: 'Conversation.',
    hero_desc: 'Immerse yourself in real-time roleplay. Verba listens, corrects pronunciation, and guides you to perfect fluency with instant AI feedback.',
    start_btn: 'Start Speaking',
    level: 'Level',
    streak: 'Streak',
    xp: 'Total XP',
    streak_msg: "You're on fire! üî•",
    xp_msg: 'Top 5% of learners',
    daily_quests: 'Daily Quests',
    practice_scenarios: 'Fluency Journey',
    choose_scenario: 'Choose Your Scenario',
    all: 'All',
    beginner: 'Beginner',
    intermediate: 'Intermediate',
    advanced: 'Advanced',
    live_btn: 'Live',
    chat_btn: 'Chat',
    footer: 'Verba AI. Fluency through technology.',
    api_missing: 'API Key Missing',
    api_missing_desc: 'This application requires a Google Gemini API key to function.',
    toast_level: 'Level Up!',
    toast_quest: 'Quest Complete',
    input_placeholder: 'Type your message...',
    ai_disclaimer: 'AI can make mistakes. Check important info.',
    suggested_responses: 'Suggested Responses',
    feedback_title: 'Verba Feedback',
    listening: 'LISTENING...',
    speaking: 'VERBA SPEAKING...',
    ready: 'READY',
    connecting: 'Connecting to Verba...',
    error_conn: 'Connection error.',
    retry: 'Retry',
    interface_lang: 'Interface',
    learning_lang: 'I want to learn',
    next_phrase: 'Next Phrase',
    prev_phrase: 'Previous',
    script_mode: 'Speaking Script',
    hint_button: 'Hint',
    locked: 'Locked',
    complete_prev: 'Complete previous',
    finish_lesson: 'Finish Lesson',
    lesson_complete: 'Lesson Complete!',
    continue: 'Continue'
  },
  'es-ES': {
    welcome: 'Bienvenido',
    hero_title_1: 'La fluidez es una',
    hero_title_2: 'Conversaci√≥n.',
    hero_desc: 'Sum√©rgete en juegos de rol en tiempo real. Verba escucha tu pronunciaci√≥n, corrige errores y te gu√≠a hacia la fluidez perfecta.',
    start_btn: 'Empezar a Hablar',
    level: 'Nivel',
    streak: 'Racha',
    xp: 'XP Total',
    streak_msg: '¬°Est√°s en racha! üî•',
    xp_msg: 'Top 5% de estudiantes',
    daily_quests: 'Misiones Diarias',
    practice_scenarios: 'Jornada de Fluidez',
    choose_scenario: 'Elige tu Escenario',
    all: 'Todos',
    beginner: 'Principiante',
    intermediate: 'Intermedio',
    advanced: 'Avanzado',
    live_btn: 'En Vivo',
    chat_btn: 'Chat',
    footer: 'Verba AI. Fluidez a trav√©s de la tecnolog√≠a.',
    api_missing: 'Falta Clave API',
    api_missing_desc: 'Esta aplicaci√≥n requiere una clave API de Google Gemini para funcionar.',
    toast_level: '¬°Subiste de Nivel!',
    toast_quest: 'Misi√≥n Completa',
    input_placeholder: 'Escribe tu mensaje...',
    ai_disclaimer: 'La IA puede cometer errores.',
    suggested_responses: 'Respuestas Sugeridas',
    feedback_title: 'Comentarios de Verba',
    listening: 'ESCUCHANDO...',
    speaking: 'VERBA HABLANDO...',
    ready: 'LISTO',
    connecting: 'Conectando a Verba...',
    error_conn: 'Error de conexi√≥n.',
    retry: 'Reintentar',
    interface_lang: 'Interfaz',
    learning_lang: 'Quiero aprender',
    next_phrase: 'Siguiente Frase',
    prev_phrase: 'Anterior',
    script_mode: 'Guion de Voz',
    hint_button: 'Pista',
    locked: 'Bloqueado',
    complete_prev: 'Completar anterior',
    finish_lesson: 'Terminar Lecci√≥n',
    lesson_complete: '¬°Lecci√≥n Completa!',
    continue: 'Continuar'
  },
  'de-DE': {
    welcome: 'Willkommen',
    hero_title_1: 'Fl√ºssigkeit ist ein',
    hero_title_2: 'Gespr√§ch.',
    hero_desc: 'Tauchen Sie in Echtzeit-Rollenspiele ein. Verba h√∂rt auf Ihre Aussprache, korrigiert Fehler und f√ºhrt Sie zur perfekten Sprachfertigkeit.',
    start_btn: 'Sprechen beginnen',
    level: 'Stufe',
    streak: 'Serie',
    xp: 'Gesamt XP',
    streak_msg: 'Du bist hei√ü! üî•',
    xp_msg: 'Top 5% der Lernenden',
    daily_quests: 'T√§gliche Quests',
    practice_scenarios: 'Szenarien',
    choose_scenario: 'W√§hlen Sie Ihr Szenario',
    all: 'Alle',
    beginner: 'Anf√§nger',
    intermediate: 'Mittelstufe',
    advanced: 'Fortgeschritten',
    live_btn: 'Live',
    chat_btn: 'Chat',
    footer: 'Verba AI. Flie√üend durch Technologie.',
    api_missing: 'API-Key fehlt',
    api_missing_desc: 'Diese Anwendung ben√∂tigt einen Google Gemini API-Key.',
    toast_level: 'Level Up!',
    toast_quest: 'Quest abgeschlossen',
    input_placeholder: 'Schreibe eine Nachricht...',
    ai_disclaimer: 'KI kann Fehler machen.',
    suggested_responses: 'Vorgeschlagene Antworten',
    feedback_title: 'Verba Feedback',
    listening: 'H√ñREN...',
    speaking: 'VERBA SPRICHT...',
    ready: 'BEREIT',
    connecting: 'Verbindung zu Verba...',
    error_conn: 'Verbindungsfehler.',
    retry: 'Wiederholen',
    interface_lang: 'Schnittstelle',
    learning_lang: 'Ich m√∂chte lernen',
    next_phrase: 'N√§chster Satz',
    prev_phrase: 'Zur√ºck',
    script_mode: 'Sprechskript',
    hint_button: 'Hinweis',
    locked: 'Gesperrt',
    complete_prev: 'Vorheriges abschlie√üen',
    finish_lesson: 'Lektion beenden',
    lesson_complete: 'Lektion abgeschlossen!',
    continue: 'Weiter'
  },
  'it-IT': {
    welcome: 'Benvenuto',
    hero_title_1: 'La fluidit√† √® una',
    hero_title_2: 'Conversazione.',
    hero_desc: 'Immergiti in giochi di ruolo in tempo real. Verba ascolta la tua pronuncia, corregge gli errori e ti guida verso la perfetta fluidit√†.',
    start_btn: 'Inizia a parlare',
    level: 'Livello',
    streak: 'Serie',
    xp: 'XP Totali',
    streak_msg: 'Sei fortissimo! üî•',
    xp_msg: 'Top 5% degli studenti',
    daily_quests: 'Missioni giornaliere',
    practice_scenarios: 'Scenari',
    choose_scenario: 'Scegli il tuo scenario',
    all: 'Tutti',
    beginner: 'Principiante',
    intermediate: 'Intermedio',
    advanced: 'Avanzato',
    live_btn: 'Dal vivo',
    chat_btn: 'Chat',
    footer: 'Verba AI. Fluidit√† attraverso la tecnologia.',
    api_missing: 'Chiave API mancante',
    api_missing_desc: 'Questa applicazione richiede una chiave API di Google Gemini.',
    toast_level: 'Livello completato!',
    toast_quest: 'Missione completata',
    input_placeholder: 'Scrivi un messaggio...',
    ai_disclaimer: 'L\'IA pu√≤ commettere errori.',
    suggested_responses: 'Risposte suggerite',
    feedback_title: 'Feedback di Verba',
    listening: 'ASCOLTO...',
    speaking: 'VERBA PARLA...',
    ready: 'PRONTO',
    connecting: 'Connessione a Verba...',
    error_conn: 'Errore di connessione.',
    retry: 'Riprova',
    interface_lang: 'Interfaccia',
    learning_lang: 'Voglio imparare',
    next_phrase: 'Frase successiva',
    prev_phrase: 'Precedente',
    script_mode: 'Copione',
    hint_button: 'Suggerimento',
    locked: 'Bloccato',
    complete_prev: 'Completa precedente',
    finish_lesson: 'Termina lezione',
    lesson_complete: 'Lezione completata!',
    continue: 'Continua'
  },
  'ru-RU': {
    welcome: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å',
    hero_title_1: '–ë–µ–≥–ª–æ—Å—Ç—å ‚Äî —ç—Ç–æ',
    hero_title_2: '–†–∞–∑–≥–æ–≤–æ—Ä.',
    hero_desc: '–ü–æ–≥—Ä—É–∑–∏—Ç–µ—Å—å –≤ —Ä–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. Verba —Å–ª—É—à–∞–µ—Ç –≤–∞—à–µ –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ, –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –æ—à–∏–±–∫–∏ –∏ –≤–µ–¥–µ—Ç –≤–∞—Å –∫ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–º—É –≤–ª–∞–¥–µ–Ω–∏—é —è–∑—ã–∫–æ–º.',
    start_btn: '–ù–∞—á–∞—Ç—å –≥–æ–≤–æ—Ä–∏—Ç—å',
    level: '–£—Ä–æ–≤–µ–Ω—å',
    streak: '–°–µ—Ä–∏—è',
    xp: '–í—Å–µ–≥–æ XP',
    streak_msg: '–í—ã –≤ —É–¥–∞—Ä–µ! üî•',
    xp_msg: '–õ—É—á—à–∏–µ 5% —É—á–µ–Ω–∏–∫–æ–≤',
    daily_quests: '–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è',
    practice_scenarios: '–°—Ü–µ–Ω–∞—Ä–∏–∏',
    choose_scenario: '–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–π',
    all: '–í—Å–µ',
    beginner: '–ù–æ–≤–∏—á–æ–∫',
    intermediate: '–°—Ä–µ–¥–Ω–∏–π',
    advanced: '–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π',
    live_btn: '–í–∂–∏–≤—É—é',
    chat_btn: '–ß–∞—Ç',
    footer: 'Verba AI. –ë–µ–≥–ª–æ—Å—Ç—å —á–µ—Ä–µ–∑ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.',
    api_missing: '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç API-–∫–ª—é—á',
    api_missing_desc: '–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è API-–∫–ª—é—á Google Gemini.',
    toast_level: '–ù–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å!',
    toast_quest: '–ó–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ',
    input_placeholder: '–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...',
    ai_disclaimer: '–ò–ò –º–æ–∂–µ—Ç –æ—à–∏–±–∞—Ç—å—Å—è.',
    suggested_responses: '–í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤',
    feedback_title: '–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å Verba',
    listening: '–°–õ–£–®–ê–Æ...',
    speaking: 'VERBA –ì–û–í–û–†–ò–¢...',
    ready: '–ì–û–¢–û–í',
    connecting: '–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Verba...',
    error_conn: '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.',
    retry: '–ü–æ–≤—Ç–æ—Ä–∏—Ç—å',
    interface_lang: '–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å',
    learning_lang: '–Ø —Ö–æ—á—É —É—á–∏—Ç—å',
    next_phrase: '–°–ª–µ–¥. —Ñ—Ä–∞–∑–∞',
    prev_phrase: '–ù–∞–∑–∞–¥',
    script_mode: '–°—Ü–µ–Ω–∞—Ä–∏–π',
    hint_button: '–ü–æ–¥—Å–∫–∞–∑–∫–∞',
    locked: '–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ',
    complete_prev: '–ó–∞–≤–µ—Ä—à–∏—Ç–µ –ø—Ä–µ–¥.',
    finish_lesson: '–ó–∞–≤–µ—Ä—à–∏—Ç—å —É—Ä–æ–∫',
    lesson_complete: '–£—Ä–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!',
    continue: '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å'
  }
};

const LANG_NAMES: Record<SupportedLanguage, string> = {
  'en-US': 'English',
  'pt-BR': 'Portuguese',
  'es-ES': 'Spanish',
  'de-DE': 'German',
  'it-IT': 'Italian',
  'ru-RU': 'Russian'
};

export const getIcon = (name: string) => {
  const icons: Record<string, React.ReactNode> = {
    Coffee: <Coffee className="w-6 h-6" />,
    Briefcase: <Briefcase className="w-6 h-6" />,
    Plane: <Plane className="w-6 h-6" />,
    ShoppingBag: <ShoppingBag className="w-6 h-6" />,
    GraduationCap: <GraduationCap className="w-6 h-6" />,
    PartyPopper: <PartyPopper className="w-6 h-6" />,
    Utensils: <Utensils className="w-6 h-6" />,
    MapPin: <MapPin className="w-6 h-6" />,
    BedDouble: <BedDouble className="w-6 h-6" />,
    Car: <Car className="w-6 h-6" />,
    Activity: <Activity className="w-6 h-6" />,
    Gamepad2: <Gamepad2 className="w-6 h-6" />,
    Heart: <Heart className="w-6 h-6" />,
    Dumbbell: <Dumbbell className="w-6 h-6" />,
    AlertTriangle: <AlertTriangle className="w-6 h-6" />,
    Film: <Film className="w-6 h-6" />,
    Phone: <Phone className="w-6 h-6" />,
    Home: <Home className="w-6 h-6" />,
    DollarSign: <DollarSign className="w-6 h-6" />,
    Kanban: <Kanban className="w-6 h-6" />,
    Presentation: <Presentation className="w-6 h-6" />,
    Users: <Users className="w-6 h-6" />,
    Laptop: <Laptop className="w-6 h-6" />,
    ShieldAlert: <ShieldAlert className="w-6 h-6" />,
    UserCheck: <UserCheck className="w-6 h-6" />,
    Scale: <Scale className="w-6 h-6" />,
    Smile: <Smile className="w-6 h-6" />,
    Siren: <Siren className="w-6 h-6" />,
    Shield: <Shield className="w-6 h-6" />,
    Brain: <Brain className="w-6 h-6" />,
    Wine: <Wine className="w-6 h-6" />,
    CarFront: <CarFront className="w-6 h-6" />,
    Receipt: <Receipt className="w-6 h-6" />,
    Scissors: <Scissors className="w-6 h-6" />,
    CloudSun: <CloudSun className="w-6 h-6" />,
    Stethoscope: <Stethoscope className="w-6 h-6" />,
    Landmark: <Landmark className="w-6 h-6" />,
    FileText: <FileText className="w-6 h-6" />,
    FileKey: <FileKey className="w-6 h-6" />,
    Cone: <Cone className="w-6 h-6" />
  };
  return icons[name] || <Languages className="w-6 h-6" />;
};

export const getScenarios = (lang: SupportedLanguage): Scenario[] => {
  const targetLangName = LANG_NAMES[lang];
  
  return ROLEPLAY_JOURNEY.map(item => ({
    id: item.id,
    title: item.title,
    description: item.description,
    icon: item.icon,
    color: item.color,
    difficulty: item.level as Scenario['difficulty'],
    hints: item.hints,
    systemInstruction: `
      You are an English teacher and roleplay partner for a ${LANG_NAMES['pt-BR']} speaker learning ${targetLangName}.
      SCENARIO: ${item.title}
      DESCRIPTION: ${item.description}
      LEVEL: ${item.level}
      
      YOUR ROLE:
      1. Act as the character in the scenario (e.g. barista, interviewer, friend).
      2. Follow the user's script if they are following it, but be flexible if they improvise.
      3. The user has a script they are trying to say. If they say it correctly, continue the conversation naturally.
      4. If they struggle with pronunciation or grammar, give a quick, gentle tip in ${LANG_NAMES['pt-BR']}, then prompt them to try again in ${targetLangName}.
      
      SCRIPT CONTEXT (The user is trying to say these lines):
      ${item.script ? item.script.map(s => `- ${s.original}`).join('\n') : 'No specific script, free conversation.'}
    `,
    script: item.script // Now passing the script correctly!
  }));
};

export const getChallenges = (lang: SupportedLanguage): DailyChallenge[] => {
  const t = UI_TEXT[lang];
  return [
    { id: '1', title: 'Falador do Chat', description: 'Envie 5 mensagens hoje', target: 5, current: 0, completed: false, reward: 50, type: 'chat' },
    { id: '2', title: 'Mestre da Voz', description: 'Complete 1 roteiro de voz', target: 1, current: 0, completed: false, reward: 100, type: 'live' },
    { id: '3', title: 'Gram√°tica Perfeita', description: '3 acertos seguidos', target: 3, current: 0, completed: false, reward: 150, type: 'perfect_grammar' }
  ];
};